name = "omni-cms-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Local Development:
# - D1: wrangler dev automatically uses a local SQLite database
#   Run migrations with: pnpm db:migrate (uses --local flag automatically)
# - R2: For local dev, create .dev.vars file with R2_ACCESS_KEY_ID and R2_SECRET_ACCESS_KEY
#   Or use: wrangler secret put R2_ACCESS_KEY_ID (for production)

[[d1_databases]]
binding = "DB"
database_name = "omni-cms"
database_id = "12aad490-4c2d-4cdb-b07f-0f536e20e994"
migrations_dir = "drizzle/migrations"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "omni-cms-media"

[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1

# Environment Variables
# Secrets (R2_ACCESS_KEY_ID, R2_SECRET_ACCESS_KEY) are set via:
#   wrangler secret put R2_ACCESS_KEY_ID
#   wrangler secret put R2_SECRET_ACCESS_KEY
# They are NOT stored in this file for security reasons.

[vars]
# Non-sensitive configuration values
# NOTE: Sensitive values (R2_ACCOUNT_ID, CF_ACCESS_AUD, CF_ACCESS_TEAM_DOMAIN) 
# should be set via environment variables or wrangler secrets, NOT in this file.
# See SET_SECRETS.md for instructions.

R2_BUCKET_NAME = "omni-cms-media"
# R2_PUBLIC_URL can be constructed from R2_ACCOUNT_ID if needed
# R2_PUBLIC_URL = "https://[R2_ACCOUNT_ID].r2.cloudflarestorage.com"
NEXT_PUBLIC_APP_URL = "omni-cms-sinc.joseph-9a2.workers.dev"
# Workers API base URL for generating media URLs
APP_URL = "https://omni-cms-api.joseph-9a2.workers.dev"



