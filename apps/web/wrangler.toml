name = "omni-cms-sinc"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".vercel/output/static"

[[d1_databases]]
binding = "DB"
database_name = "omni-cms"
database_id = "12aad490-4c2d-4cdb-b07f-0f536e20e994"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "omni-cms-media"
NODE_OPTIONS = "--max-old-space-size=4096"

# Environment Variables
# Note: Observability configuration is not supported for Pages projects
# For logging and monitoring, use Cloudflare Dashboard → Pages → Analytics
# Note: For Cloudflare Pages, environment variables are typically set in the dashboard:
# Cloudflare Dashboard → Pages → Settings → Environment Variables
# 
# Build Environment Variables (set in Cloudflare Pages dashboard):
# - NODE_OPTIONS = "--max-old-space-size=4096" (prevents out-of-memory errors during build)
#
# Required runtime variables:
# - R2_ACCOUNT_ID
# - R2_ACCESS_KEY_ID (secret)
# - R2_SECRET_ACCESS_KEY (secret)
# - R2_BUCKET_NAME = "omni-cms-media"
# - CF_ACCESS_TEAM_DOMAIN
# - CF_ACCESS_AUD (secret)
# - NEXT_PUBLIC_APP_URL (e.g., https://omni-cms-sinc.pages.dev)
# - NEXT_PUBLIC_API_URL (optional, if using separate API worker)
#
# Optional variables:
# - R2_PUBLIC_URL (for custom R2 media domain)
# - CLOUDFLARE_ACCOUNT_ID
#
# For local development, use .env.local file (see env.example)
# Note: NODE_OPTIONS is already set in package.json scripts for local builds
[vars]
R2_BUCKET_NAME = "omni-cms-media"